<html>
  <head>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/reveal.js@4.3.0/dist/reveal.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/reveal.js@4.3.0/dist/theme/white.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/highlight.js@11.5.0/styles/github.css">
    <style>
      :root {
        --r-heading-text-transform: none;
      }

      .reveal blockquote {
	background: #fff;
        border-left: 10px solid #ccc;
        width: 98%;
      }
    </style>
  </head>
  <body>
    <div class="reveal">
      <div class="slides">
        <section data-background-image="opening-slide.png" data-background-size="cover">
        </section>
        <section data-markdown>
            <script type="text/template">
              ## About Me

              ---

              ## About SessionStack

              ---


              ## Back to basics

              * Event loops

                > event loop is a programming construct or design pattern that waits for and dispatches events or messages in a program
              * Asynchronous I/O

                >  asynchronous I/O (also non-sequential I/O) is a form of input/output processing that permits other processing to continue before the transmission has finished

              ---

              ## Why use it

              > asyncio is used as a foundation for multiple Python asynchronous frameworks that provide high-performance network and web-servers, database connection libraries, distributed task queues, etc.
              >
              > asyncio is often a perfect fit for IO-bound and high-level structured network code.

              ---


              ## FastAPI in the mix

              FastAPI is a modern, fast (high-performance), web framework for building APIs with Python 3.6+ based on standard Python type hints

              ```python
from fastapi import FastAPI


app = FastAPI()


@app.get("/")
async def root():
    return {"message": "Hello World"}
              ```

              ---

              ## FastAPI is Fast

              ![FastAPI Benchmarks Table](./fast-api-benchmarks.png)

              ---

              ## Gotchas

              Always keep in mind that in order for your code to be non-blocking and efficient for async execution the external libraries you use should support async APIs themselves

              ```python
...

@app.get("/")
async def root():
    # this operation blocks!
    my_sql_alchemy_user = session.query(User).one()
    return {"user": my_sql_alchemy_user.name }

...
              ```


              ---

              ## Real live use cases

              * Data ingestion layers (FastAPI, starlette, uvicorn)
              * Typical CRUD REST APIs (FastAPI, starlette, uvicorn)
              * Doing efficient web scraping engines (aiohttp)
              * Message Queue workers (aioamqp, aiokafka)
              * WebSockets (FastAPI)

              ---

              ## Q&A

              ---

              ## Beer And Pizza Time

              ![Beer and pizza](./beer-and-pizza.gif)

              ---

              ## Resources

              https://docs.python.org/3/library/asyncio.html

              https://fastapi.tiangolo.com/

              https://github.com/timofurrer/awesome-asyncio

            </script>
        </section>
      </div>
    </div>
    <script src="https://cdn.jsdelivr.net/npm/reveal.js@4.3.0/dist/reveal.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/reveal.js@4.3.0/plugin/markdown/markdown.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/reveal.js@4.3.0/plugin/highlight/highlight.js"></script>
    <script>
      for (var slide of document.getElementsByTagName('section')){
        if (!(slide.getAttribute('data-background-image') ||
              slide.getAttribute('data-background-color') ||
              slide.getAttribute('data-background-video') ||
              slide.getAttribute('data-background-iframe'))){
          slide.setAttribute('data-background-image', './image1.png')
          slide.setAttribute('data-background-size', 'auto')
          slide.setAttribute('data-background-color', '#f0f0f0')
        }
      }

      Reveal.initialize({
        plugins: [RevealMarkdown, RevealHighlight], 
        slideNumber: true,
        width: 1280,
        height: 700,
        center: false
      });
    </script>
  </body>
</html>
